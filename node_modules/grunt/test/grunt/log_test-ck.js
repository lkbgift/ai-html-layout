"use strict";var grunt=require("../../lib/grunt"),hooker=grunt.util.hooker,stdoutEqual=function(e,t,n){var r="";hooker.hook(process.stdout,"write",{pre:function(e){r+=grunt.log.uncolor(e);return hooker.preempt()}});t();hooker.unhook(process.stdout,"write");e.equal(r,n)};exports.log={setUp:function(e){grunt.log.muted=!1;e()},write:function(e){e.expect(2);stdoutEqual(e,function(){grunt.log.write("foo")},"foo");stdoutEqual(e,function(){grunt.log.writeln("foo")},"foo\n");e.done()},error:function(e){e.expect(4);stdoutEqual(e,function(){grunt.log.error()},"ERROR\n");stdoutEqual(e,function(){grunt.log.error("foo")},">> foo\n");stdoutEqual(e,function(){grunt.log.errorlns(grunt.util._.repeat("foo",30," "))},">> "+grunt.util._.repeat("foo",19," ")+"\n"+">> "+grunt.util._.repeat("foo",11," ")+"\n");stdoutEqual(e,function(){grunt.log.fail("foo")},"foo\n");e.done()},ok:function(e){e.expect(4);stdoutEqual(e,function(){grunt.log.ok()},"OK\n");stdoutEqual(e,function(){grunt.log.ok("foo")},">> foo\n");stdoutEqual(e,function(){grunt.log.oklns(grunt.util._.repeat("foo",30," "))},">> "+grunt.util._.repeat("foo",19," ")+"\n"+">> "+grunt.util._.repeat("foo",11," ")+"\n");stdoutEqual(e,function(){grunt.log.success("foo")},"foo\n");e.done()},"header and subhead":function(e){e.expect(2);stdoutEqual(e,function(){grunt.log.header("foo")},"\nfoo\n");stdoutEqual(e,function(){grunt.log.subhead("foo")},"\nfoo\n");e.done()},debug:function(e){e.expect(2);var t=grunt.option("debug");grunt.option("debug",!0);stdoutEqual(e,function(){grunt.log.debug("foo")},"[D] foo\n");grunt.option("debug",!1);stdoutEqual(e,function(){grunt.log.debug("foo")},"");grunt.option("debug",t);e.done()},writetableln:function(e){e.expect(1);stdoutEqual(e,function(){grunt.log.writetableln([10],[grunt.util._.repeat("foo",10)])},"foofoofoof\noofoofoofo\nofoofoofoo\n");e.done()},writelns:function(e){e.expect(1);stdoutEqual(e,function(){grunt.log.writelns(grunt.util._.repeat("foo",30," "))},grunt.util._.repeat("foo",20," ")+"\n"+grunt.util._.repeat("foo",10," ")+"\n");e.done()},writeflags:function(e){e.expect(1);stdoutEqual(e,function(){grunt.log.writeflags(["foo","bar"],"test")},"test: foo, bar\n");e.done()}};